# Changelog de commit

- Commit: `db50801`
- Fecha: `2026-01-26 10:30`
- Autor: `Ismael Leiva Zurita`

## Resumen

Documentación completa para que nuevos desarrolladores puedan setup del proyecto, configurar Firebase, y entender cómo usar cada servicio.

## Detalles

### Added

#### FIREBASE_SETUP.md

Guía paso a paso para configurar Firebase desde cero:

1. **Crear Proyecto Firebase**
   - En console.firebase.google.com
   - Nombrar "ai-farma-app"
   - Registrar aplicaciones iOS/Android/Web

2. **Configurar Autenticación**
   - Anonymous sign-in
   - Email/password
   - Google OAuth con credenciales
   - Apple OAuth (iOS)

3. **Crear Firestore Database**
   - Región: São Paulo (más cercano a Chile)
   - Modo: Producción con security rules
   - Estructura de colecciones documentada

4. **Configurar Security Rules**
   ```javascript
   - Acceso a /users/{userId}/* solo por propietario
   - Acceso público lectura a pharmacy-ratings
   - Deniega todo lo demás
   ```

5. **Obtener Credenciales**
   - API Keys de Firebase
   - Google Maps API Key
   - Configuración en .env

6. **Setup Emulator Local** (Desarrollo)
   - Firebase emulators:start para testing offline

7. **Configurar Backups**
   - Políticas automáticas
   - Alertas de cuota

8. **Troubleshooting**
   - Errores comunes con soluciones
   - Debugging tips

#### DEVELOPMENT.md

Guía completa de desarrollo:

1. **Primeros Pasos**
   - Instalación de dependencias
   - Configuración de .env
   - Ejecutar en iOS/Android/Web

2. **Estructura del Proyecto**
   - Explicación de cada carpeta
   - Propósito de cada tipo de archivo
   - Rutas de importación con @/

3. **Servicios (Con Ejemplos de Código)**

   **AuthService**
   ```typescript
   // Autenticación anónima
   const user = await authService.signInAnonymously();

   // Registro
   const user = await authService.signUpWithEmail(email, password, name);

   // Login
   const user = await authService.signInWithEmail(email, password);
   ```

   **LocationService**
   ```typescript
   // Obtener ubicación
   const location = await locationService.getLocation();

   // Monitorear movimiento
   await locationService.startLocationWatcher((location) => {
     // Nueva ubicación
   });

   // Calcular distancia
   const distance = locationService.calculateDistance(loc1, loc2);
   ```

   **PharmacyService**
   ```typescript
   // Obtener todas
   const pharmacies = await pharmacyService.fetchPharmacies();

   // Turnos hoy
   const onDutyIds = await pharmacyService.fetchOnDutyPharmacies();

   // Cercanas
   const nearby = await pharmacyService.getPharmaciesNearby(location, 5);

   // Buscar
   const results = await pharmacyService.searchPharmacies('Ahumada');
   ```

   **MedicationService**
   ```typescript
   // Crear
   const med = await medicationService.createMedication(userId, {
     medicationName: 'Paracetamol',
     dosage: '500mg',
     frequency: 'twice',
     times: ['08:00', '20:00'],
   });

   // Registrar toma
   await medicationService.recordAdherence(userId, medId, true);

   // Estadísticas
   const stats = await medicationService.getAdherenceStats(userId, medId, 7);
   ```

   **NotificationService**
   ```typescript
   // Agendar recordatorio
   await notificationService.scheduleReminder(medication, 15);

   // Mostrar notificación
   await notificationService.showLocalNotification('Recordatorio', 'Toma tu medicina');
   ```

   **SyncService**
   ```typescript
   // Agregar a cola
   await syncService.addToSyncQueue(userId, 'CREATE', 'medication', id, data);

   // Procesar
   const result = await syncService.processSyncQueue(userId);

   // Verificar pendencias
   const hasPending = await syncService.hasPendingSync(userId);
   ```

4. **Custom Hooks (Con Ejemplos)**

   **useUserLocation()**
   ```typescript
   const { location, isLoading, error, getLocation } = useUserLocation();
   // location: { latitude, longitude, accuracy }
   ```

   **usePharmacies()**
   ```typescript
   const {
     pharmacies,
     nearby,
     isLoading,
     searchPharmacies,
     getPharmaciesNearby,
   } = usePharmacies();
   ```

   **useSyncQueue()**
   ```typescript
   const {
     queueSize,
     isSyncing,
     syncProgress,
     processSyncQueue,
   } = useSyncQueue();
   ```

5. **Convenciones de Código**
   - TypeScript strict mode
   - Naming: Componentes PascalCase, funciones camelCase, constantes UPPER_SNAKE_CASE
   - Interfaces con prefijo I
   - Imports con rutas @/

6. **Testing**
   - Estructura de tests
   - Ejemplos de unit tests
   - Jest configuration

7. **Debugging**
   - React DevTools
   - Redux DevTools
   - Console logging best practices
   - Flipper integration

8. **Commits**
   - Conventional Commits: feat:, fix:, docs:, refactor:, test:, chore:
   - Ejemplos de mensajes

9. **Performance Tips**
   - Lazy loading componentes
   - Memoization con React.memo
   - Virtual scrolling con FlashList
   - AsyncStorage caching

## Recursos Enlazados

- React Native Docs
- Expo Docs
- Firebase React Native
- Redux Toolkit
- TypeScript Handbook

## Onboarding Path

Para nuevo desarrollador:

1. Leer README.md (visión general)
2. Seguir FIREBASE_SETUP.md (setup backend)
3. Ejecutar `npm install && npm start`
4. Revisar DEVELOPMENT.md > Servicios para entender APIs
5. Leer ejemplo de componente que use hook
6. Hacer primer commit usando Conventional Commits

## Testing de Documentación

Toda la documentación incluye:
- Ejemplos de código funcionales
- Rutas correctas a archivos
- Nomenclatura consistente
- Enlaces internos funcionando

## Próximas Mejoras

- Videos tutoriales (futura)
- API documentation automática (JSDoc)
- Architecture decision records (ADRs)
- Troubleshooting wiki
